{% extends './base.html' %}
{% load static %}
{% block content %}
<style>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

    @import url(//fonts.googleapis.com/earlyaccess/nanummyeongjo.css);
    @import url(https://cdn.jsdelivr.net/gh/moonspam/NanumSquare@1.0/nanumsquare.css);

    body.history-list {
        margin: 0;
        height: 100vh;
        width: 100%;
        background: #e8e8e8;
    }
    div.left {
        width: 25%;
        margin: 0;
        height: 100vh;
        float: left;
        box-sizing: border-box;
        background: #e8e8e8;
        overflow-y:scroll;
        -ms-overflow-style: none;
        scrollbar-width: none;
        font-family: 'NanumSquare', sans-serif;
        margin:auto;
        margin-top:7.2%;
    }
    .left::-webkit-scrollbar {
        display: none;
    }

    div.right {
        width: 75%;
        margin: 0;
        height: 100vh;
        float: right;
        box-sizing: border-box;
        background: #e8e8e8;
        font-family: 'NanumSquare', sans-serif;
        margin-top:7.2%;

    }

        div.left::-webkit-scrollbar {
        width: 10px;
    }

    div.left::-webkit-scrollbar-thumb {
        background-color: #2f3542;
        border-radius: 10px;
        background-clip: padding-box;
        border: 2px solid transparent;
    }

    div.left::-webkit-scrollbar-thumb {
        background-color: grey;
        border-radius: 10px;
        box-shadow: inset 0px 0px 5px white;
    }


    a.card-link {
        margin-left:11%;
    }

    div.card {
        margin:auto;
        border-radius: 15px;
    }


    div.card-left {
        position: relative;
        width: 20vw;
        margin:auto;
        border-radius: 15px;
        background:#ffffff;
    }


    div.history-text{
        margin-left:6%;
        align-items: center;
    }

    h5.card-title {
        font-family: 'Nanum Myeongjo', serif;
    }

    img.card-img-top{
        max-width: 100%;
        max-height: 100%;
        margin:auto;
        object-fit: contain;
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
    }

    img.history-img{
        max-width:100%;
        max-height: 100%;
        margin:auto;
        object-fit: contain;
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
    }

    h5.card-title{
        font-family: 'Nanum Myeongjo', serif;
    }

    div.col-md-8{
        margin-top:30%;
    }

    button.btn-light {
        margin-bottom: 8px;
        margin-right: 5px;
    }
    form.button-history{
        float:left;
    }

    h5.card-title {
        padding-top: 10px;
    }

    #demo-place{
        font-size:14;
        color:#636160;
    }

    #demo-custom-place{
        font-size:14;
        color:#636160;
    }
    a.card-link{
        font-size : 20px;
        color: #232324;
        padding: 15px;
    }


    .lib-panel {
        margin-bottom: 20Px;
    }
    .lib-panel img {
        width: 100%;
        background-color: transparent;
        border-top-left-radius: 15px;
        border-bottom-left-radius: 15px;
    }


    .lib-panel .row,
    .lib-panel .col-md-6 {
        padding: 0;
        background-color: #FFFFFF;
        width: 70vw;
        border-radius: 15px;
    }


    .lib-panel .lib-row {
        padding: 0 20px 0 20px;
        border-radius: 15px;
    }

    .lib-panel .lib-row.lib-header {
        background-color: #FFFFFF;
        width:34vw;
        font-size: 25px;
        padding: 10px 20px 0 20px;
        font-family: 'Nanum Myeongjo', serif;
        border-radius: 15px;
    }


    .lib-panel .lib-row.lib-desc {
        position: relative;
        display: block;
        font-size: 15px;
    }
    .lib-panel .lib-row.lib-desc a{
        position: absolute;
        width: 100%;
        bottom: 10px;
        left: 20px;
    }

    .row-margin-bottom {
        margin-bottom: 20px;
        margin-top: 15vh;
        margin-left: 1%;

    }

    .box-shadow {
        -webkit-box-shadow: 0 0 10px 0 rgba(0,0,0,.10);
        box-shadow: 0 0 10px 0 rgba(0,0,0,.10);
    }

    .no-padding {
        padding: 0;
    }
    #demo-comment{
        padding:4%;
    }
    #demo-create-at {
        color:#636160;
    }



</style>

<body class="history-list">
<div class="left">
    <div class="history">
        <a href="{% url 'history-create' %}" class="card-link">일기 작성</a>
        {% for item in historys %}
        <div class="card-body">
            <div class="card-left" onclick="myFunction({{item.id}})">
                {% if item.img %}
                <img class="card-img-top" id="image{{item.id}}" src="{{ item.img.url }}" , alt="">
                {% endif %}
                <div class="history-text">
                    <p class="card-text">
                        {%if item.title %}
                    <h5 class="card-title" id="title{{item.id}}">
                        {{item.title }}</h5>
                    {% endif %}
                    </p>
                    {%if item.mood %}
                    <h6 class="card-subtitle mb-2 text-muted" id="mood{{item.id}}">{{ item.mood }}</h6>
                    {% endif %}
                    {%if item.place %}
                    <p class="card-text" id="place{{item.id}}">{{ item.place }}</p>
                    {% endif %}
                    {%if item.custom_place %}
                    <p class="card-text" id="custom-place{{item.id}}">{{ item.custom_place }}</p>
                    {% endif %}
                    {%if item.comment %}
                    <p class="card-text" id="comment{{item.id}}" style="display: none">
                        {{ item.comment }}</p>
                    {% endif %}

                    <p class="card-text" id="created-at{{item.id}}" style="display: none">{{ item.created_at }}</p>
                    <form class="button-history" action="{% url 'history-update' %}?id={{ item.id }}" name="update"
                          method="post">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-light btn-sm">수정</button>
                        <br/>
                    </form>
                    <form class="button-history2" action="{% url 'history-delete' id=item.id %}" name="delete"
                          method="post">
                        {% csrf_token %}
                        <script>
                                                function Function() {
                                                alert("Really?");
                                                }





                        </script>
                        <button type="submit" class="btn btn-light btn-sm" onclick="Function()">삭제</button>

                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<div class="right">
    <div class="containor">
        <div class="row row-margin-bottom">
            <div class="col-md-5 no-padding lib-item" data-category="view">
                <div class="lib-panel">
                    <div class="row box-shadow">
                        <div class="col-md-6">
                            <img class="lib-img-show" id="img" src="../static/logo2.png" class="card-img">
                        </div>
                        <div class="col-md-6">
                            <div class="lib-row lib-header" id="demo-title">

                            </div>
                            <div class="lib-header-seperator"></div>
                            <div class="lib-row lib-desc" id="demo-mood">
                            </div>
                            <p class="card-text" id="demo-comment"></p>
                            <div class="lib-row lib-desc" id="demo-place">
                            </div>
                            <div class="lib-row lib-desc" id="demo-custom-place">
                            </div>
                            <div class="lib-row lib-desc" id="demo-create-at">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
</div>

        <script type="text/javascript">

                        window.myFunction = function(id) {
                            if(document.getElementById("title" + id) != null){
                                var title = document.getElementById("title" + id).textContent;
                            }
                            if(mood = document.getElementById("mood" + id) != null){
                                var mood = document.getElementById("mood" + id).textContent;
                            }
                            if(document.getElementById("image" + id) != null){
                                var image = document.getElementById("image" + id).src;
                                document.getElementById("img").src = image;
                            }else{
                                document.getElementById("img").src="../static/logo3.png";
                            }
                            if(document.getElementById("comment" + id) != null){
                                var comment = document.getElementById("comment" + id).textContent;
                                comment = comment.replace(/(?:\r\n|\r|\n)/g, '<br />');
                            }
                            if (document.getElementById("place" + id) != null){
                                var place = document.getElementById("place" + id).textContent;
                            }
                            if (document.getElementById("custom-place" + id) != null){
                                var customplace = document.getElementById("custom-place" + id).textContent;
                            }
                            if(document.getElementById("created-at" + id) != null){
                                var create = document.getElementById("created-at" + id).textContent;
                            }
                            if(title != null){
                                document.getElementById("demo-title").innerHTML = title;
                            }else{
                                document.getElementById("demo-title").innerHTML = " ";
                            }
                            if(mood != null){
                                document.getElementById("demo-mood").innerHTML = mood;
                            }else{
                                document.getElementById("demo-mood").innerHTML = "";
                            }
                            if(comment != null){
                                document.getElementById("demo-comment").innerHTML = comment
                            }else{
                                document.getElementById("demo-comment").innerHTML = "";
                            }
                            if(place != null){
                                document.getElementById("demo-place").innerHTML = place;
                            }else{
                                document.getElementById("demo-place").innerHTML = "";
                            }
                            if(customplace != null){
                                document.getElementById("demo-custom-place").innerHTML = customplace;
                            }else{
                                document.getElementById("demo-custom-place").innerHTML = "";
                            }
                            if(create != null){
                                document.getElementById("demo-create-at").innerHTML = create;
                            }else{
                                document.getElementById("demo-create-at").innerHTML = "";
                            }
                        }




        </script>
</body>
{% endblock %}
